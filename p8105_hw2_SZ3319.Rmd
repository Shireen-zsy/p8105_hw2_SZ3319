---
title: "p8105_hw2_SZ3319"
author: "Shiyu Zhang"
date: "2024-09-30"
output: github_document


---

```{r setup, echo = FALSE, message = FALSE}
library(tidyverse)
library(readxl)
```

## Problem 1

### 1.1 Import the dataset and clean names

```{r}
transit_df = 
  read_csv("hw2data/NYC_Transit_Subway_Entrance_And_Exit_Data.csv", na = c("NA", "", ".")) |> 
  janitor::clean_names()

tail(transit_df, 10)
```

### 1.2 Select variables

Select columns and clean the data; convert `entry` to logical.

```{r}
transit_select <- transit_df |> 
  select(
    line, 
    station_name, 
    station_latitude, 
    station_longitude, 
    starts_with("route"), 
    entry, 
    vending, 
    entrance_type, 
    ada) |> 
  mutate(
    entry = ifelse(entry == "YES", TRUE, FALSE)
    )
  
```

Description: 

### 1.3 Analysis the data

#### 1.3.1 Calculate the distinct station.

```{r}
distinct_stations <- transit_select |> 
  distinct(line, station_name) |> 
  nrow()

distinct_stations
```
There are **465** distinct stations are there.

#### 1.3.2 Calculate the number of ADA compliant.

```{r}
ADA_compliant_stations <- 
  transit_select |> 
  filter(ada == "TRUE") |> 
  distinct(line, station_name) |> 
  nrow()

ADA_compliant_stations
```
**84** stations are ADA compliant.

#### 1.3.3 Propotion of station

Calculate the total number of stations without vending.

```{r}
no_vending <- transit_select |> 
  filter(vending == "NO") |>
  distinct(line, station_name) |> 
  nrow()
```
 
Calculate how many of them allow entry.

```{r}
allow_entry_no_vending <- transit_select |> 
  filter(vending == "NO", entry == TRUE) |>
  distinct(line, station_name) |> 
  nrow()
```

Calculate the propotion.

```{r}
propotion_no_vending <-
  allow_entry_no_vending / no_vending

propotion_no_vending
```

### 1.4 Reform the data.

```{r}

```


## Problem 2


### 2.1 Import the `Mr. Trash Wheel` sheet and clean names

```{r}
mr_df = 
  read_excel("hw2data/202409 Trash Wheel Collection Data.xlsx", sheet = "Mr. Trash Wheel", skip = 1) |> 
  janitor::clean_names()

head(mr_df, 10)


mr_clean <- mr_df |> 
  select(dumpster:homes_powered) |> 
  drop_na(dumpster) |> #omit rows that do not include dumpster-specific data
  mutate(
    sports_balls = as.integer(round(sports_balls)),
    year = as.numeric(year),
    trash_wheel = "Mr"
  ) # round the number of sports balls to the nearest integer and converts the result to an integer variable (using as.integer)

tail(mr_clean, 10)
```
### 2.2 Import the `Professor Trash Wheel` sheet and clean names

```{r}
professor_df = 
  read_excel("hw2data/202409 Trash Wheel Collection Data.xlsx", sheet = "Professor Trash Wheel", skip = 1) |> 
  janitor::clean_names()

head(professor_df, 10)


professor_clean <- professor_df |> 
  select(dumpster:homes_powered) |> 
  drop_na(dumpster, month) |> #omit rows that do not include dumpster-specific data
  mutate(trash_wheel = "Professor")
  

tail(professor_clean, 10)
```



### 2.3 Import the `Gwynnda Trash Wheel` sheet and clean names

```{r}
gwynnda_df = 
  read_excel("hw2data/202409 Trash Wheel Collection Data.xlsx", sheet = "Gwynnda Trash Wheel", skip = 1) |> 
  janitor::clean_names()

head(gwynnda_df, 10)


gwynnda_clean <- gwynnda_df |> 
  select(dumpster:homes_powered) |> 
  drop_na(dumpster) |> 
  mutate(trash_wheel = "Gwynnda")

tail(gwynnda_clean, 10)
```


### 2.4 Bind the datasets

```{r}
bind_data = 
  bind_rows(mr_clean, professor_clean, gwynnda_clean) |>
  janitor::clean_names() |>
  #mutate(race = str_to_lower(race)) |> 
  select(trash_wheel, everything()) 
```

### 2.5 



