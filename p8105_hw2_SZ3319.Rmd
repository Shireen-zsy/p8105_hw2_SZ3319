---
title: "p8105_hw2_SZ3319"
author: "Shiyu Zhang"
date: "2024-09-30"
output: github_document


---

```{r setup, echo = FALSE, message = FALSE}
library(tidyverse)
```

## Problem 1

### 1.1 Import the dataset and clean names

```{r}
transit_df = 
  read_csv("hw2data/NYC_Transit_Subway_Entrance_And_Exit_Data.csv", na = c("NA", "", ".")) |> 
  janitor::clean_names()

tail(transit_df, 10)
```

### 1.2 Select variables

Select columns and clean the data; convert `entry` to logical.

```{r}
transit_select <- transit_df |> 
  select(
    line, 
    station_name, 
    station_latitude, 
    station_longitude, 
    starts_with("route"), 
    entry, 
    vending, 
    entrance_type, 
    ada) |> 
  mutate(
    entry = ifelse(entry == "YES", TRUE, FALSE)
    )
  
```

Description: 

### 1.3 Analysis the data

#### 1.3.1 Calculate the distinct station.

```{r}
distinct_stations <- transit_select |> 
  distinct(line, station_name) |> 
  nrow()

distinct_stations
```
There are **465** distinct stations are there.

#### 1.3.2 Calculate the number of ADA compliant.

```{r}
ADA_compliant_stations <- 
  transit_select |> 
  filter(ada == "TRUE") |> 
  distinct(line, station_name) |> 
  nrow()

ADA_compliant_stations
```
**84** stations are ADA compliant.

#### 1.3.3 Propotion of station

Calculate the total number of stations without vending.

```{r}
no_vending <- transit_select |> 
  filter(vending == "NO") |>
  distinct(line, station_name) |> 
  nrow()
```
 
Calculate how many of them allow entry.

```{r}
allow_entry_no_vending <- transit_select |> 
  filter(vending == "NO", entry == TRUE) |>
  distinct(line, station_name) |> 
  nrow()
```

Calculate the propotion.

```{r}
propotion_no_vending <-
  allow_entry_no_vending / no_vending

propotion_no_vending
```







